<!DOCTYPE html>
<html>
<head>
    <title>Temperature Control</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        .interface { margin: 20px; padding: 20px; border: 1px solid #ddd; }
        .slider { width: 300px; margin: 10px auto; }
        .temperature { font-size: 24px; margin-top: 20px; }
    </style>
</head>
<body>
    <h1>Temperature Control Interfaces</h1>

    <div class="interface">
        <h2>Infotainment Screen (Tablet)</h2>
        <input type="range" id="infotainmentSlider" class="slider" min="15" max="30" value="20">
        <div class="temperature" id="infotainmentTemp">Temperature: 20°C</div>
    </div>

    <div class="interface">
        <h2>Steering Wheel (Raspberry Pi)</h2>
        <input type="range" id="steeringWheelSlider" class="slider" min="15" max="30" value="20">
        <div class="temperature" id="steeringWheelTemp">Temperature: 20°C</div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <script>
        var socket = io('http://192.168.0.24:5000');
        var infotainmentSlider = document.getElementById("infotainmentSlider");
        var steeringWheelSlider = document.getElementById("steeringWheelSlider");
        var infotainmentTemp = document.getElementById("infotainmentTemp");
        var steeringWheelTemp = document.getElementById("steeringWheelTemp");

        function updateTemperature(slider, tempDisplay, interface) {
            tempDisplay.innerHTML = "Temperature: " + slider.value + "°C";
            socket.emit('temperature_update', { 
                temperature: slider.value,
                interface: interface
            });
        }

        infotainmentSlider.oninput = function() {
            updateTemperature(this, infotainmentTemp, 'Infotainment Screen');
        }

        steeringWheelSlider.oninput = function() {
            updateTemperature(this, steeringWheelTemp, 'Steering Wheel');
        }

        socket.on('temperature_sync', function(data) {
            infotainmentSlider.value = data.temperature;
            steeringWheelSlider.value = data.temperature;
            infotainmentTemp.innerHTML = "Temperature: " + data.temperature + "°C";
            steeringWheelTemp.innerHTML = "Temperature: " + data.temperature + "°C";
        });

        socket.on('experiment_started', function(data) {
            alert('Experiment started for participant: ' + data.participant);
        });

        socket.on('experiment_ended', function(data) {
            alert('Experiment ended for participant: ' + data.participant);
        });
    </script>
</body>
</html>